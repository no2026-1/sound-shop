<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Sound Shop</title>
  <link href="/css/output.css" rel="stylesheet">
</head>
<body class="bg-gray-100">

<!-- Navbar -->
<nav class="bg-gray-900 text-white px-6 py-4 flex justify-between items-center shadow-lg">
  <h1 class="text-3xl font-bold">üéß Sound Shop</h1>
  <div class="space-x-6">
    <a href="/" class="hover:text-gray-300 font-semibold">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
    <a href="/cart" class="hover:text-gray-300 font-semibold relative">
      ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
      <% if (cart.length > 0) { %>
        <span class="absolute -top-2 -right-3 bg-red-600 text-white text-xs rounded-full px-2"><%= cart.reduce((sum,item)=>sum+item.quantity,0) %></span>
      <% } %>
    </a>
  </div>
</nav>

<div class="container mx-auto p-8">
  <h2 class="text-4xl font-bold mb-6 text-center">Checkout</h2>

  <% if (cart.length === 0) { %>
    <p class="text-gray-600 text-center text-xl">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
  <% } else { %>
    <div class="space-y-6">
      <% let total = 0; %>
      <% cart.forEach(item => { 
           let subtotal = item.price * item.quantity;
           total += subtotal;
      %>
        <div class="bg-white rounded-2xl shadow-lg p-4 flex justify-between items-center">
          <div class="flex items-center space-x-4">
            <img src="<%= item.image %>" class="w-24 h-24 rounded-xl object-cover">
            <div>
              <h3 class="text-xl font-bold"><%= item.name %></h3>
              <p class="text-gray-600">‡∏£‡∏≤‡∏Ñ‡∏≤: <%= item.price.toLocaleString() %> LAK x <%= item.quantity %></p>
              <p class="text-gray-700 font-bold">‡∏£‡∏ß‡∏°: <%= subtotal.toLocaleString() %> LAK</p>
            </div>
          </div>
        </div>
      <% total = total; }) %>

      <div class="bg-white rounded-2xl shadow-lg p-6 text-right text-2xl font-bold">
        ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <%= total.toLocaleString() %> LAK
      </div>

      <div class="text-right">
        <button class="bg-green-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
      </div>
    </div>
  <% } %>
</div>
<form action="/checkout" method="POST" class="space-y-4 bg-white p-6 rounded-2xl shadow-lg">
  <h3 class="text-2xl font-bold mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
  <input type="text" name="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" required class="w-full border rounded-xl px-4 py-2">
  <input type="text" name="address" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà" required class="w-full border rounded-xl px-4 py-2">
  <input type="text" name="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" required class="w-full border rounded-xl px-4 py-2">

  <h3 class="text-2xl font-bold mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
  <select name="payment" class="w-full border rounded-xl px-4 py-2">
    <option value="‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</option>
    <option value="‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå</option>
    <option value="‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï">‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</option>
  </select>

  <button type="submit" class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 w-full mt-4">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
</form>

</body>
</html>
